if command -v gitleaks >/dev/null 2>&1; then
  gitleaks protect --staged --verbose --redact
elif [ -n "${LOCALAPPDATA:-}" ] && [ -x "$LOCALAPPDATA/Microsoft/WinGet/Packages/Gitleaks.Gitleaks_Microsoft.Winget.Source_8wekyb3d8bbwe/gitleaks.exe" ]; then
  "$LOCALAPPDATA/Microsoft/WinGet/Packages/Gitleaks.Gitleaks_Microsoft.Winget.Source_8wekyb3d8bbwe/gitleaks.exe" protect --staged --verbose --redact
else
  echo "gitleaks not found; skipping secret scan."
fi

bunx lint-staged --concurrent false
